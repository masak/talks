<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>#49714: [PATCH] Extend perl6 spectest to fetch and execute S04-S29 tests</title>
    <link rel="shortcut icon" href="/rt3/NoAuth/images//favicon.png" type="image/png" />
    <link rel="stylesheet" href="/rt3/NoAuth/css/rt.perl.org/main.css" type="text/css" media="all" />
    <link rel="stylesheet" href="/rt3/NoAuth/css/print.css" type="text/css" media="print" />
    <script type="text/javascript" src="/rt3/NoAuth/js/util.js"></script>
    <script type="text/javascript" src="/rt3/NoAuth/js/titlebox-state.js"></script>
    <script type="text/javascript"><!--
        onLoadHook("loadTitleBoxStates()");
    --></script>

  </head>
  <body id="comp-Public-Bug-Display">

  <div id="logo">
    <a href="http://rt.perl.org/rt3/"><img src="/rt3/NoAuth/images//local/pblogo.gif" alt="PerlBug" width="230" height="50"></a>
  </div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
    You are currently an anonymous guest.
    |
    <a href="/rt3/NoAuth/Logout.html?URL=/rt3/index.html?goto=%252FPublic%252FBug%252FDisplay.html%253Fid%253D49714">Login</a>
    |
    <a href="/rt3/NoAuth/Logout.html">Return to Main</a>
   | <a href="/rt3/User/Prefs.html">Preferences</a>
  

  </div>



  <div id="topactions">
    <span class="topaction">
<form action="/rt3/Public/Search/Simple.html">
  <input size="12" name="q" autocomplete="off" accesskey="0" class="field" />
  <input type="submit" class="button" value="Search" />
</form>
    </span>
  </div>

</div>

<div id="nav">
<ul id="system-menu">
<div><div class="wrapper">
</div></div>
</ul>



</div>

<div id="header">
  <h1>#49714: [PATCH] Extend perl6 spectest to fetch and execute S04-S29 tests</h1>

  <ul id="page-menu">
    <div><div><div>
&nbsp;
    </div></div></div>
  </ul>

</div>

<div id="body">





<a name="skipnav" id="skipnav" accesskey="8"></a>




<div class="">
  <div class="titlebox " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox--_Public_Bug_Display.html------Report information---0');" onfocus="this.blur(); return false;" title="Toggle visibility">X</a></span>
    <span class="left">Report information</span>
    <span class="right"></span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display.html------Report information---0">



      <table width="100%" class="ticket-summary">
      <tr>
	<td valign="top" width="50%" class="boxcontainer">
	  <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox--_Public_Bug_Display.html--ticket-info-basics----The Basics---0');" onfocus="this.blur(); return false;" title="Toggle visibility">X</a></span>
    <span class="left"><a href="/rt3/Ticket/Modify.html?id=49714">The Basics</a></span>
    <span class="right"></span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display.html--ticket-info-basics----The Basics---0">



	        <table>
  <tr>
    <td class="label id">Id:</td>
    <td class="value id">49714</td>
  </tr>
  <tr>
    <td class="label status">Status:</td>
    <td class="value status">resolved</td>
  </tr>
  <tr>
    <td class="label time worked">Worked:</td>
    <td class="value time worked">5 min
</td>
  </tr>
  <tr>
    <td class="label time left">Left:</td>
    <td class="value time left">0 min
</td>
  </tr>
  <tr>
    <td class="label priority">Priority:</td>
    <td class="value priority">0/0</td>
  </tr>
  <tr>
    <td class="label queue">Queue:</td>
    <td class="value queue">perl6
</td>
  </tr>

</table>

	      <hr class="clear" />
  </div>
</div>




</div>


	  
      <div class="ticket-info-people">
  <div class="titlebox ticket-info-people" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox--_Public_Bug_Display.html--ticket-info-people----People---0');" onfocus="this.blur(); return false;" title="Toggle visibility">X</a></span>
    <span class="left"><a href="/rt3/Ticket/ModifyPeople.html?id=49714">People</a></span>
    <span class="right"></span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display.html--ticket-info-people----People---0">



            <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">

particle
&lt;jerry.gay [at] gmail.com&gt;

</td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">


cosimo [at] streppone.it

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

	      <hr class="clear" />
  </div>
</div>




</div>



	</td>
	<td valign="top" width="50%" class="boxcontainer">
    
	  <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox--_Public_Bug_Display.html--ticket-info-cfs----Bug Information---0');" onfocus="this.blur(); return false;" title="Toggle visibility">X</a></span>
    <span class="left"><a href="/rt3/Ticket/Modify.html?id=49714">Bug Information</a></span>
    <span class="right"></span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display.html--ticket-info-cfs----Bug Information---0">


 
	        <table>
  <tr id="CF-18-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19-ShowRow">
    <td class="label">Tag:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-20-ShowRow">
    <td class="label">Platform:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-21-ShowRow">
    <td class="label">Patch Status:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


	      <hr class="clear" />
  </div>
</div>




</div>



	  <div class="">
  <div class="titlebox " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox--_Public_Bug_Display.html------Attachments---0');" onfocus="this.blur(); return false;" title="Toggle visibility">X</a></span>
    <span class="left">Attachments</span>
    <span class="right"></span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display.html------Attachments---0">





perl6_spectest.patch<br />
<ul>


<li><font size="-2">
<a href="/rt3/Ticket/Attachment/344854/154026/perl6_spectest.patch">
Sun Jan 13 09:37:28 2008 (935b) by cosimo
</a>
</font></li>
</ul>


spectest.patch<br />
<ul>


<li><font size="-2">
<a href="/rt3/Ticket/Attachment/344324/153772/spectest.patch">
Sat Jan 12 08:57:11 2008 (2.2k) by cosimo <!-- x --> at streppone.it
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>



<br />



	</td>
      </tr>
    </table>





    <hr class="clear" />
  </div>
</div>




</div>



<br />




<div class="titlebox " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox--_Public_Bug_Display.html------History---0');" onfocus="this.blur(); return false;" title="Toggle visibility">X</a></span>
    <span class="left">History</span>
    <span class="right"><span style="color: black">Display mode:</span> <span class="selected">Brief headers</span> &mdash; <a href="/rt3/Ticket/Display.html?ShowHeaders=1;id=49714">Full headers</a></span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display.html------History---0">




<div id="ticket-history">
<div class="ticket-transaction message odd">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-344324" href="/rt3/Ticket/Display.html?id=49714#txn-344324">#</a>
      &nbsp;
    </td>
    <td class="date">Sat&nbsp;Jan&nbsp;12&nbsp;08:57:11&nbsp;2008</td>
    <td class="description">
      cosimo <!-- x --> at streppone.it -  Ticket created
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value">[PATCH] Extend perl6 spectest to fetch and execute S04-S29 tests</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value">Sat, 12 Jan 2008 17:55:29 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value">Parrot bugs &lt;parrotbug <!-- x --> at parrotcode.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value">Cosimo Streppone &lt;cosimo <!-- x --> at streppone.it&gt;</td>
  </tr>
</table>
<div class="messagebody">
<table>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/344324/153770/">Download &#40;untitled&#41;</a>
<span class="downloadcontenttype">
[text/plain 262b]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
This is a patch to modify `make spectest&#39; target<br />
for languages/perl6 to fetch also new S04 and S29<br />
tests from pugs test suite.<br />
<br />
S29 tests are structured as S29-functions/subdir/*.t<br />
so they were not considered. With this patch they<br />
are correctly run.<br />
<br />
-- <br />
Cosimo<br />
</div>
</div>
<table>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/344324/153772/spectest.patch">Download spectest.patch</a>
<span class="downloadcontenttype">
[text/plain 2.2k]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
Index: lib/Parrot/Test/Harness.pm<br />
<div class="message-stanza-depth-1">
===================================================================<br />
</div>
--- lib/Parrot/Test/Harness.pm  &#40;revisione 24784&#41;<br />
+++ lib/Parrot/Test/Harness.pm  &#40;copia locale&#41;<br />
@@ -108,7 +108,7 @@<br />
                 &#40; $options{files} &#38;&#38; ref $options{files} eq &#39;ARRAY&#39; &#41; ?<br />
                     @{ $options{files} }<br />
<div class="message-stanza-depth-1">
                     :<br />
</div>
-                    &#40; &#39;t/*.t&#39;, &#39;t/*/*.t&#39; &#41;;<br />
+                    &#40; &#39;t/*.t&#39;, &#39;t/*/*.t&#39;, &#39;t/*/*/*.t&#39; &#41;;<br />
             foreach &#40; @file_patterns &#41; {<br />
                 push @files, glob&#40; File::Spec-&gt;catfile&#40; $options{language}, $_  &#41; &#41;,<br />
             }<br />
@@ -124,7 +124,9 @@<br />
         my @files;<br />
         foreach my $arg &#40; @{ $options{arguments} } &#41; {<br />
             -f $arg &#38;&#38; push @files, glob $arg;<br />
-            -d $arg &#38;&#38; push @files, glob&#40; File::Spec-&gt;catfile&#40; $arg, &#39;*.t&#39; &#41; &#41;;<br />
+            -d $arg &#38;&#38; push @files,<br />
+                glob&#40; File::Spec-&gt;catfile&#40; $arg, &#39;*.t&#39; &#41; &#41;,<br />
+                glob&#40; File::Spec-&gt;catfile&#40; $arg, &#39;*/*.t&#39;&#41; &#41;;<br />
         }<br />
 <br />
         return @files;<br />
@@ -135,7 +137,8 @@<br />
<div class="message-stanza-depth-1">
         # You may want a deeper search than this.<br />
</div>
         return &#40;<br />
             glob&#40; File::Spec-&gt;catfile&#40; &#39;t&#39;, &#39;*.t&#39; &#41; &#41;,<br />
-            glob&#40; File::Spec-&gt;catfile&#40; &#39;t&#39;, &#39;*/*.t&#39; &#41; &#41;<br />
+            glob&#40; File::Spec-&gt;catfile&#40; &#39;t&#39;, &#39;*/*.t&#39; &#41; &#41;,<br />
+            glob&#40; File::Spec-&gt;catfile&#40; &#39;t&#39;, &#39;*/*/*.t&#39; &#41; &#41;<br />
         &#41;;<br />
     }<br />
 }<br />
Index: languages/perl6/t/fetchspec<br />
<div class="message-stanza-depth-1">
===================================================================<br />
</div>
--- languages/perl6/t/fetchspec &#40;revisione 24784&#41;<br />
+++ languages/perl6/t/fetchspec &#40;copia locale&#41;<br />
@@ -21,8 +21,10 @@<br />
 <br />
 my @spectests = qw&#40;<br />
     t/01-sanity<br />
+    t/spec/S02-literals<br />
     t/spec/S03-operators<br />
-    t/spec/S02-literals<br />
+    t/spec/S04-statements<br />
+    t/spec/S29-functions<br />
 &#41;;<br />
 <br />
 foreach my $srcfile &#40;@spectests&#41; {<br />
Index: languages/perl6/config/makefiles/root.in<br />
<div class="message-stanza-depth-1">
===================================================================<br />
</div>
--- languages/perl6/config/makefiles/root.in    &#40;revisione 24784&#41;<br />
+++ languages/perl6/config/makefiles/root.in    &#40;copia locale&#41;<br />
@@ -140,7 +140,9 @@<br />
        cd t/spec &#38;&#38; svn up<br />
        $&#40;PERL&#41; t/harness \<br />
             t/spec/S02-literals \<br />
-            t/spec/S03-operators\<br />
+            t/spec/S03-operators \<br />
+            t/spec/S04-statements \<br />
+            t/spec/S29-functions<br />
 <br />
 fulltest: all testtest spectest<br />
 <br />
</div>
</div>
</div>
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction other even">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-344330" href="/rt3/Ticket/Display.html?id=49714#txn-344330">#</a>
      &nbsp;
    </td>
    <td class="date">Sat&nbsp;Jan&nbsp;12&nbsp;08:57:13&nbsp;2008</td>
    <td class="description">
      RT_System -  Tag Patch added
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction basics odd">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-344394" href="/rt3/Ticket/Display.html?id=49714#txn-344394">#</a>
      &nbsp;
    </td>
    <td class="date">Sat&nbsp;Jan&nbsp;12&nbsp;10:28:48&nbsp;2008</td>
    <td class="description">
      coke -  Queue changed from parrot to perl6
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction message even">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-344726" href="/rt3/Ticket/Display.html?id=49714#txn-344726">#</a>
      &nbsp;
    </td>
    <td class="date">Sat&nbsp;Jan&nbsp;12&nbsp;19:35:57&nbsp;2008</td>
    <td class="description">
      pmichaud -  Correspondence added
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value">Re: [perl #49714] [PATCH] Extend perl6 spectest to fetch and execute S04-S29 tests</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value">Sat, 12 Jan 2008 21:35:36 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value">perl6-internals <!-- x --> at perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value">&#34;Patrick R. Michaud&#34; &lt;pmichaud <!-- x --> at pobox.com&gt;</td>
  </tr>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/344726/153946/">Download &#40;untitled&#41;</a>
<span class="downloadcontenttype">
[text/plain 912b]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
On Sat, Jan 12, 2008 at 08:57:11AM -0800, Cosimo Streppone wrote:<br />
<div class="message-stanza-depth-1">
<div class="message-stanza-depth-2">
&gt; # New Ticket Created by  Cosimo Streppone <br />
&gt; # Please include the string:  [perl #49714]<br />
&gt; # in the subject line of all future correspondence about this issue. <br />
&gt; # &lt;URL: http://rt.perl.org/rt3/Ticket/Display.html?id=49714 &gt;<br />
</div>
&gt; <br />
&gt; <br />
&gt; This is a patch to modify `make spectest&#39; target<br />
&gt; for languages/perl6 to fetch also new S04 and S29<br />
&gt; tests from pugs test suite.<br />
&gt; <br />
&gt; S29 tests are structured as S29-functions/subdir/*.t<br />
&gt; so they were not considered. With this patch they<br />
&gt; are correctly run.<br />
</div>
<br />
I&#39;ve been hoping to avoid subdirs in the SXX directories.<br />
In other words, instead of having<br />
<br />
  S29-functions/type1/*.t<br />
  S29-functions/type2/*.t<br />
  S29-functions/type3/*.t<br />
<br />
I&#39;d like to see<br />
<br />
  S29-type1/*.t<br />
  S29-type2/*.t<br />
  S29-type3/*.t<br />
<br />
The idea is to have one directory under spec/ for each<br />
major topic, not one directory for each Synopsis.<br />
<br />
Pm<br />
</div>
</div>
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction basics odd">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-344728" href="/rt3/Ticket/Display.html?id=49714#txn-344728">#</a>
      &nbsp;
    </td>
    <td class="date">Sat&nbsp;Jan&nbsp;12&nbsp;19:35:59&nbsp;2008</td>
    <td class="description">
      RT_System -  Status changed from &#39;new&#39; to &#39;open&#39;
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction message even">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-344752" href="/rt3/Ticket/Display.html?id=49714#txn-344752">#</a>
      &nbsp;
    </td>
    <td class="date">Sun&nbsp;Jan&nbsp;13&nbsp;01:39:45&nbsp;2008</td>
    <td class="description">
      cosimo -  Correspondence added
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value">pmichaud <!-- x --> at pobox.com</td>
  </tr>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/344752/153956/">Download &#40;untitled&#41;</a>
<span class="downloadcontenttype">
[text/plain 316b]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
Ok, I see.<br />
So I&#39;m doing wrong with pugs/t/spec/S29-functions.<br />
I had discussed the [S29/subdir/test.t] structure with particle over irc,<br />
but maybe I misunderstood, sorry.<br />
So I&#39;d better change these tests to something like:<br />
<br />
   t/spec/S29-functions/str_chomp.t<br />
   t/spec/S29-functions/str_p5chomp.t<br />
   ...<br />
<br />
Is that ok?<br />
</div>
</div>
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction message odd">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-344758" href="/rt3/Ticket/Display.html?id=49714#txn-344758">#</a>
      &nbsp;
    </td>
    <td class="date">Sun&nbsp;Jan&nbsp;13&nbsp;01:42:47&nbsp;2008</td>
    <td class="description">
      cosimo -  Comments added
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
<table>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/344758/153962/">Download &#40;untitled&#41;</a>
<span class="downloadcontenttype">
[text/plain 569b]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
On Dom. 13 Gen. 2008 01:39:45, cosimo wrote:<br />
<div class="message-stanza-depth-1">
&gt; Ok, I see.<br />
&gt; So I&#39;m doing wrong with pugs/t/spec/S29-functions.<br />
&gt; I had discussed the [S29/subdir/test.t] structure with particle over irc,<br />
&gt; but maybe I misunderstood, sorry.<br />
&gt; So I&#39;d better change these tests to something like:<br />
&gt; <br />
&gt;    t/spec/S29-functions/str_chomp.t<br />
&gt;    t/spec/S29-functions/str_p5chomp.t<br />
&gt;    ...<br />
&gt; <br />
&gt; Is that ok?<br />
</div>
<br />
I answer myself: no, it&#39;s not ok.<br />
The following should be ok:<br />
<br />
    t/spec/S29-str/chomp.t<br />
    t/spec/S29-str/p5chomp.t<br />
    ...<br />
    t/spec/{syn_number}-{syn_section_title}/{function}.t<br />
</div>
</div>
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction message even">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-344760" href="/rt3/Ticket/Display.html?id=49714#txn-344760">#</a>
      &nbsp;
    </td>
    <td class="date">Sun&nbsp;Jan&nbsp;13&nbsp;01:55:58&nbsp;2008</td>
    <td class="description">
      cosimo <!-- x --> at streppone.it -  Correspondence added
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value">&#34;Patrick R. Michaud&#34; &lt;pmichaud <!-- x --> at pobox.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value">Re: [perl #49714] [PATCH] Extend perl6 spectest to fetch and execute S04-S29 tests</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value">Sun, 13 Jan 2008 10:54:57 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value">Perl6 Internals &lt;perl6-internals <!-- x --> at perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value">Cosimo Streppone &lt;cosimo <!-- x --> at streppone.it&gt;</td>
  </tr>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/344760/153964/">Download &#40;untitled&#41;</a>
<span class="downloadcontenttype">
[text/plain 755b]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
Patrick wrote:<br />
<br />
<div class="message-stanza-depth-1">
&gt; I&#39;ve been hoping to avoid subdirs in the SXX directories.<br />
&gt; In other words, instead of having<br />
&gt; <br />
&gt;   S29-functions/type1/*.t<br />
&gt;   S29-functions/type2/*.t<br />
&gt;   S29-functions/type3/*.t<br />
&gt; <br />
&gt; I&#39;d like to see<br />
&gt; <br />
&gt;   S29-type1/*.t<br />
&gt;   S29-type2/*.t<br />
&gt;   S29-type3/*.t<br />
&gt; <br />
&gt; The idea is to have one directory under spec/ for each<br />
&gt; major topic, not one directory for each Synopsis.<br />
</div>
<br />
Ok, I see.<br />
<br />
So I&#39;m doing wrong now with pugs/t/spec/S29-functions.<br />
I had discussed the [S29/subdir/*.t] structure with<br />
particle over irc, but probably I misunderstood.<br />
<br />
So I&#39;d better change these tests to something like:<br />
<br />
   t/spec/S29-str/chomp.t<br />
   t/spec/S29-str/p5chomp.t<br />
   ...<br />
   t/spec/{syn_number}-{syn_section_title}/{function}.t<br />
<br />
Is that ok?<br />
<br />
-- <br />
Cosimo<br />
</div>
</div>
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction message odd">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-344840" href="/rt3/Ticket/Display.html?id=49714#txn-344840">#</a>
      &nbsp;
    </td>
    <td class="date">Sun&nbsp;Jan&nbsp;13&nbsp;08:58:58&nbsp;2008</td>
    <td class="description">
      pmichaud -  Correspondence added
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value">Perl6 Internals &lt;perl6-internals <!-- x --> at perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value">Re: [perl #49714] [PATCH] Extend perl6 spectest to fetch and execute S04-S29 tests</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value">Sun, 13 Jan 2008 10:58:25 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value">Cosimo Streppone &lt;cosimo <!-- x --> at streppone.it&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value">&#34;Patrick R. Michaud&#34; &lt;pmichaud <!-- x --> at pobox.com&gt;</td>
  </tr>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/344840/154010/">Download &#40;untitled&#41;</a>
<span class="downloadcontenttype">
[text/plain 1.5k]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
On Sun, Jan 13, 2008 at 10:54:57AM +0100, Cosimo Streppone wrote:<br />
<div class="message-stanza-depth-1">
&gt; I had discussed the [S29/subdir/*.t] structure with<br />
&gt; particle over irc, but probably I misunderstood.<br />
&gt; <br />
&gt; So I&#39;d better change these tests to something like:<br />
&gt; <br />
&gt;   t/spec/S29-str/chomp.t<br />
&gt;   t/spec/S29-str/p5chomp.t<br />
&gt;   ...<br />
&gt;   t/spec/{syn_number}-{syn_section_title}/{function}.t<br />
&gt; <br />
&gt; Is that ok?<br />
</div>
<br />
Yes, I like this much better.  Perhaps more generic is:<br />
<br />
   t/spec/{syn}-{section}/{name}.t<br />
<br />
where &#34;syn&#34; is the corresponding synposis or chapter, <br />
&#34;section&#34; is the major section heading for the features<br />
being tested, and &#34;name&#34; is anything that conveniently<br />
identifies the tests.  <br />
<br />
I choose &#34;name&#34; instead of &#34;function&#34; for the last part,<br />
because I don&#39;t want to imply a 1-1 correspondence between<br />
test filename and function names.  Sometimes we&#39;re testing<br />
something other than a function, some tests are better<br />
organized by a feature other than their name.<br />
<br />
Similarly, the &#34;section&#34; doesn&#39;t have to correspond<br />
strictly to existing headings in the Synopses.  Larry<br />
has already commented [1] that we should think of<br />
the current sections in each synopsis as being<br />
guidance and not cast in stone.  So, when choosing<br />
how to name a section, I typically also look to the<br />
p5 camel to decide how to choose a section name.<br />
<br />
Lastly, we should probably move this thread to<br />
&lt;perl6-compiler <!-- x --> at perl.org&gt;, which is focused on<br />
Perl 6 implementations and the test suite.<br />
This list is really more for discussions about<br />
Parrot.<br />
<br />
Thanks!<br />
<br />
[1]  http://www.nntp.perl.org/group/perl.perl6.compiler/2007/12/msg1668.html<br />
</div>
</div>
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction message even">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-344854" href="/rt3/Ticket/Display.html?id=49714#txn-344854">#</a>
      &nbsp;
    </td>
    <td class="date">Sun&nbsp;Jan&nbsp;13&nbsp;09:37:28&nbsp;2008</td>
    <td class="description">
      cosimo -  Correspondence added
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value">perl6-compiler <!-- x --> at perl.org</td>
  </tr>
</table>
<div class="messagebody">
<table>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/344854/154020/">Download &#40;untitled&#41;</a>
<span class="downloadcontenttype">
[text/plain 968b]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
On Dom. 13 Gen. 2008 08:58:58, pmichaud wrote:<br />
<div class="message-stanza-depth-1">
&gt; On Sun, Jan 13, 2008 at 10:54:57AM +0100, Cosimo Streppone wrote:<br />
<div class="message-stanza-depth-2">
&gt; &gt; I had discussed the [S29/subdir/*.t] structure with<br />
&gt; &gt; particle over irc, but probably I misunderstood.<br />
&gt; &gt; <br />
&gt; &gt; So I&#39;d better change these tests to something like:<br />
&gt; &gt; <br />
&gt; &gt;   t/spec/S29-str/chomp.t<br />
&gt; &gt;   t/spec/S29-str/p5chomp.t<br />
&gt; &gt;   ...<br />
&gt; &gt;   t/spec/{syn_number}-{syn_section_title}/{function}.t<br />
&gt; &gt; <br />
&gt; &gt; Is that ok?<br />
</div>
&gt; <br />
&gt; Yes, I like this much better.  Perhaps more generic is:<br />
&gt; <br />
&gt;    t/spec/{syn}-{section}/{name}.t<br />
&gt; <br />
&gt; where &#34;syn&#34; is the corresponding synposis or chapter, <br />
&gt; &#34;section&#34; is the major section heading for the features<br />
&gt; being tested, and &#34;name&#34; is anything that conveniently<br />
&gt; identifies the tests.  <br />
</div>
<br />
Test scripts structure is now changed.<br />
http://dev.pugscode.org/changeset/19465<br />
<br />
And I also reworked the spectest patch to run also<br />
S04-statements and S29-str test dirs.<br />
It&#39;s attached.<br />
<br />
Hope everything&#39;s ok this time.<br />
Cheers,<br />
</div>
</div>
</div>
<table>
</table>
<div class="messagebody">
<table>
</table>
<div class="messagebody">
<div class="message-stanza-depth-0">

</div>
</div>
<table>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/344854/154026/perl6_spectest.patch">Download perl6_spectest.patch</a>
<span class="downloadcontenttype">
[application/octet-stream 935b]
</span> 
</div>
<div class="messagebody">
Message body not shown because it is too large or is not plain text.</div>
</div>
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction people odd">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-347204" href="/rt3/Ticket/Display.html?id=49714#txn-347204">#</a>
      &nbsp;
    </td>
    <td class="date">Thu&nbsp;Jan&nbsp;17&nbsp;21:45:37&nbsp;2008</td>
    <td class="description">
      particle -  Taken
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction message even">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-347206" href="/rt3/Ticket/Display.html?id=49714#txn-347206">#</a>
      &nbsp;
    </td>
    <td class="date">Thu&nbsp;Jan&nbsp;17&nbsp;22:00:28&nbsp;2008</td>
    <td class="description">
      particle -  Correspondence added
    </td>
    <td class="time-taken">5 min</td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value">perl6-internals <!-- x --> at perl.org</td>
  </tr>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/347206/155194/">Download &#40;untitled&#41;</a>
<span class="downloadcontenttype">
[text/plain 240b]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
applied as r24965.<br />
<br />
it&#39;s causing a heck of a lot of failing tests. however, i&#39;ll leave them<br />
in for a day or three, while we see what we can do to get them passing.<br />
<br />
hint: getting &#39;fudge&#39; working on rakudo would do us a world of good.<br />
~jerry<br />
</div>
</div>
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction basics odd">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-347212" href="/rt3/Ticket/Display.html?id=49714#txn-347212">#</a>
      &nbsp;
    </td>
    <td class="date">Thu&nbsp;Jan&nbsp;17&nbsp;22:00:31&nbsp;2008</td>
    <td class="description">
      particle -  Status changed from &#39;open&#39; to &#39;resolved&#39;
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction message even">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-347256" href="/rt3/Ticket/Display.html?id=49714#txn-347256">#</a>
      &nbsp;
    </td>
    <td class="date">Fri&nbsp;Jan&nbsp;18&nbsp;00:09:30&nbsp;2008</td>
    <td class="description">
      cosimo <!-- x --> at streppone.it -  Correspondence added
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value">Re: [perl #49714] [PATCH] Extend perl6 spectest to fetch and execute S04-S29 tests</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value">Fri, 18 Jan 2008 09:08:42 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value">Perl6 Internals &lt;perl6-internals <!-- x --> at perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value">Cosimo Streppone &lt;cosimo <!-- x --> at streppone.it&gt;</td>
  </tr>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/347256/155222/">Download &#40;untitled&#41;</a>
<span class="downloadcontenttype">
[text/plain 450b]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
Jerry Gay via RT wrote:<br />
<div class="message-stanza-depth-1">
&gt; applied as r24965.<br />
&gt; <br />
&gt; it&#39;s causing a heck of a lot of failing tests. however, i&#39;ll leave them<br />
&gt; in for a day or three, while we see what we can do to get them passing.<br />
&gt; <br />
&gt; hint: getting &#39;fudge&#39; working on rakudo would do us a world of good.<br />
&gt; ~jerry<br />
</div>
<br />
Do you mean running:<br />
<br />
    perl6.exe util/fudge<br />
<br />
or extending languages/perl6 to run the tests correctly?<br />
In the first case, I don&#39;t get exactly the &#34;why&#34;...<br />
<br />
-- <br />
Cosimo<br />
</div>
</div>
    </td>
  </tr>

</table>
</div>


<div class="ticket-transaction message odd">

<table width="100%" cellspacing="0" cellpadding="2" border="0">
  <tr>
    <td rowspan="2" valign="top" class="type">
      <a name="txn-354840" href="/rt3/Ticket/Display.html?id=49714#txn-354840">#</a>
      &nbsp;
    </td>
    <td class="date">Sat&nbsp;Feb&nbsp;02&nbsp;21:12:59&nbsp;2008</td>
    <td class="description">
      pmichaud -  Correspondence added
    </td>
    <td class="time-taken"></td>
    <td class="actions">&nbsp;</td>
  </tr>

  <tr>
    <td colspan="4" class="content">
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value">Perl6 Internals &lt;perl6-internals <!-- x --> at perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value">Re: [perl #49714] [PATCH] Extend perl6 spectest to fetch and execute S04-S29 tests</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value">Sun, 13 Jan 2008 10:58:25 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value">Cosimo Streppone &lt;cosimo <!-- x --> at streppone.it&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value">&#34;Patrick R. Michaud&#34; &lt;pmichaud <!-- x --> at pobox.com&gt;</td>
  </tr>
</table>
 
<div class="downloadattachment">
 
<a href="/rt3/Ticket/Attachment/354840/159068/">Download &#40;untitled&#41;</a>
<span class="downloadcontenttype">
[text/plain 1.5k]
</span> 
</div>
<div class="messagebody">
<div class="message-stanza-depth-0">
On Sun, Jan 13, 2008 at 10:54:57AM +0100, Cosimo Streppone wrote:<br />
<div class="message-stanza-depth-1">
&gt; I had discussed the [S29/subdir/*.t] structure with<br />
&gt; particle over irc, but probably I misunderstood.<br />
&gt; <br />
&gt; So I&#39;d better change these tests to something like:<br />
&gt; <br />
&gt;   t/spec/S29-str/chomp.t<br />
&gt;   t/spec/S29-str/p5chomp.t<br />
&gt;   ...<br />
&gt;   t/spec/{syn_number}-{syn_section_title}/{function}.t<br />
&gt; <br />
&gt; Is that ok?<br />
</div>
<br />
Yes, I like this much better.  Perhaps more generic is:<br />
<br />
   t/spec/{syn}-{section}/{name}.t<br />
<br />
where &#34;syn&#34; is the corresponding synposis or chapter, <br />
&#34;section&#34; is the major section heading for the features<br />
being tested, and &#34;name&#34; is anything that conveniently<br />
identifies the tests.  <br />
<br />
I choose &#34;name&#34; instead of &#34;function&#34; for the last part,<br />
because I don&#39;t want to imply a 1-1 correspondence between<br />
test filename and function names.  Sometimes we&#39;re testing<br />
something other than a function, some tests are better<br />
organized by a feature other than their name.<br />
<br />
Similarly, the &#34;section&#34; doesn&#39;t have to correspond<br />
strictly to existing headings in the Synopses.  Larry<br />
has already commented [1] that we should think of<br />
the current sections in each synopsis as being<br />
guidance and not cast in stone.  So, when choosing<br />
how to name a section, I typically also look to the<br />
p5 camel to decide how to choose a section name.<br />
<br />
Lastly, we should probably move this thread to<br />
&lt;perl6-compiler <!-- x --> at perl.org&gt;, which is focused on<br />
Perl 6 implementations and the test suite.<br />
This list is really more for discussions about<br />
Parrot.<br />
<br />
Thanks!<br />
<br />
[1]  http://www.nntp.perl.org/group/perl.perl6.compiler/2007/12/msg1668.html<br />
</div>
</div>
    </td>
  </tr>

</table>
</div>


</div>
    <hr class="clear" />
  </div>
</div>




 


</div>
<hr size=0>
<div>
For issues related to this RT instance (aka "perlbug"), please contact <tt>perlbug-admin at perl.org</tt>
</div>


<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-50555-18");
pageTracker._initData();
pageTracker._trackPageview();
</script>

<div id="footer">
  <p id="time">
    <span>Time to display: 2.947007</span>
  </p>

  <p id="bpscredits">
    <span>
&#187;&#124;&#171; RT 3.6.HEAD Copyright 1996-2006 <a href="http://www.bestpractical.com?rt=3.6.HEAD">Best Practical Solutions, LLC</a>.
</span>
</p>

</div>

  </body>
</html>
